<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Local vs Paid Models - EmbedEval</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --border: #30363d;
      --text: #c9d1d9;
      --text-muted: #8b949e;
      --accent: #58a6ff;
      --success: #3fb950;
      --warning: #d29922;
      --danger: #f85149;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
    }
    
    .container { max-width: 1200px; margin: 0 auto; }
    
    h1, h2, h3 { color: white; margin-bottom: 1rem; }
    
    .hero {
      text-align: center;
      padding: 3rem;
      background: linear-gradient(135deg, #1a1f35 0%, #0d1117 100%);
      border-radius: 16px;
      margin-bottom: 2rem;
    }
    
    .hero h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }
    
    .hero .subtitle {
      color: var(--text-muted);
      font-size: 1.2rem;
    }
    
    .verdict {
      display: inline-block;
      padding: 0.5rem 1.5rem;
      border-radius: 20px;
      font-weight: bold;
      margin-top: 1rem;
      font-size: 1.2rem;
    }
    
    .verdict.success { background: rgba(63, 185, 80, 0.2); color: var(--success); }
    .verdict.warning { background: rgba(210, 153, 34, 0.2); color: var(--warning); }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
    }
    
    .card h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    
    .stat {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--accent);
    }
    
    .stat-label {
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    
    .stack-item {
      display: flex;
      align-items: flex-start;
      padding: 0.75rem;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }
    
    .stack-item .layer {
      font-weight: 600;
      min-width: 100px;
      color: var(--accent);
    }
    
    .stack-item .value {
      flex: 1;
    }
    
    .stack-item .desc {
      color: var(--text-muted);
      font-size: 0.85rem;
    }
    
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .comparison-table th,
    .comparison-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    
    .comparison-table th {
      color: var(--text-muted);
      font-weight: 500;
    }
    
    .comparison-table .our-best {
      background: rgba(88, 166, 255, 0.1);
    }
    
    .badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .badge.positive { background: rgba(63, 185, 80, 0.2); color: var(--success); }
    .badge.negative { background: rgba(248, 81, 73, 0.2); color: var(--danger); }
    
    .chart-container {
      position: relative;
      height: 300px;
      margin-top: 1rem;
    }
    
    .findings {
      list-style: none;
    }
    
    .findings li {
      padding: 0.75rem;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      margin-bottom: 0.5rem;
      border-left: 3px solid var(--accent);
    }
    
    footer {
      text-align: center;
      padding: 2rem;
      color: var(--text-muted);
    }
    
    footer a { color: var(--accent); }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero">
      <h1>üèÜ Local vs Paid Model Evolution</h1>
      <p class="subtitle">Can local embedding models match paid API performance?</p>
      <div class="verdict success">
        ‚úÖ YES! Local can match paid with the right config
      </div>
    </div>
    
    <div class="grid">
      <div class="card">
        <h3>üéØ Best Local Score</h3>
        <div class="stat">85.1%</div>
        <div class="stat-label">Overall retrieval quality</div>
      </div>
      
      <div class="card">
        <h3>üìä Best Paid Score</h3>
        <div class="stat">78.0%</div>
        <div class="stat-label">OpenAI text-embedding-3-large</div>
      </div>
      
      <div class="card">
        <h3>üí∞ Cost Savings</h3>
        <div class="stat">-19900%</div>
        <div class="stat-label">vs paid APIs</div>
      </div>
    </div>
    
    <div class="card" style="margin-bottom: 2rem;">
      <h3>üîß Winning Configuration</h3>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">
        Base: <strong>ollama/1</strong>
      </p>
      
      <div class="stack-item">
        <span class="layer">Query</span>
        <span class="value">
          lowercase
          <div class="desc">Lowercase normalization</div>
        </span>
      </div>
      
      <div class="stack-item">
        <span class="layer">Chunking</span>
        <span class="value">
          parent_child
          <div class="desc">Small chunks, return parent context</div>
        </span>
      </div>
      
      <div class="stack-item">
        <span class="layer">Retrieval</span>
        <span class="value">
          hybrid_rrf (k1=30, k2=10)
          <div class="desc">Reciprocal Rank Fusion</div>
        </span>
      </div>
      
      <div class="stack-item">
        <span class="layer">Reranking</span>
        <span class="value">
          cascade
          <div class="desc">Fast filter ‚Üí accurate rerank</div>
        </span>
      </div>
      
      <div class="stack-item">
        <span class="layer">Multi-stage</span>
        <span class="value">
          two_stage
          <div class="desc">Retrieve k1, rerank to k2</div>
        </span>
      </div>
      
      <div class="stack-item">
        <span class="layer">Ensemble</span>
        <span class="value">
          full_ensemble
          <div class="desc">Models + methods + rerankers</div>
        </span>
      </div>
    </div>
    
    <div class="grid">
      <div class="card">
        <h3>üìà Evolution Progress</h3>
        <div class="chart-container">
          <canvas id="progressChart"></canvas>
        </div>
      </div>
      
      <div class="card">
        <h3>üîë Key Findings</h3>
        <ul class="findings">
          <li> Hybrid retrieval (dense + sparse) beats pure dense</li>
<li> Multi-stage retrieval (over-fetch then filter) works well</li>
<li> Ensemble methods provide robustness</li>
<li> Parent-child chunking preserves context</li>
          
        </ul>
      </div>
    </div>
    
    <div class="card">
      <h3>üìä Model Comparison</h3>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Model</th>
            <th>Type</th>
            <th>Score</th>
            <th>vs Our Best</th>
          </tr>
        </thead>
        <tbody>
          <tr class="our-best">
            <td>‚ú® 1 lowercase ‚Üícascade (2stg) k10</td>
            <td>Local + Enhancements</td>
            <td>85.1%</td>
            <td>-</td>
          </tr>
          
          <tr>
            <td>openai/text-embedding-3-large</td>
            <td>Paid API</td>
            <td>78.0%</td>
            <td><span class="badge positive">+7.1%</span></td>
          </tr>
          <tr>
            <td>openai/text-embedding-3-small</td>
            <td>Paid API</td>
            <td>74.0%</td>
            <td><span class="badge positive">+11.1%</span></td>
          </tr>
          <tr>
            <td>gemini/text-embedding-004</td>
            <td>Paid API</td>
            <td>76.0%</td>
            <td><span class="badge positive">+9.1%</span></td>
          </tr>
          <tr>
            <td>cohere/embed-english-v3.0</td>
            <td>Paid API</td>
            <td>78.0%</td>
            <td><span class="badge positive">+7.1%</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <footer>
      <p>Generated by <a href="https://github.com/Algiras/embedeval">EmbedEval</a> at 2026-01-30T20:25:17.386Z</p>
      <p><a href="./landing.html">‚Üê Back to Dashboard</a></p>
    </footer>
  </div>
  
  <script>
    const history = [{"generation":0,"bestFitness":0.8497582739150917,"avgFitness":0.8376803089651377,"bestGenome":"0 expandllm ‚Üícascade (3stg) k5","gapToPaid":-0.0697582739150917},{"generation":1,"bestFitness":0.8497582739150917,"avgFitness":0.8426487745749294,"bestGenome":"0 expandllm ‚Üícascade (3stg) k5","gapToPaid":-0.0697582739150917},{"generation":2,"bestFitness":0.8497582739150917,"avgFitness":0.8427851380885354,"bestGenome":"0 expandllm ‚Üícascade (3stg) k5","gapToPaid":-0.0697582739150917},{"generation":3,"bestFitness":0.8497582739150917,"avgFitness":0.8430275497032094,"bestGenome":"0 expandllm ‚Üícascade (3stg) k5","gapToPaid":-0.0697582739150917},{"generation":4,"bestFitness":0.8498113432139434,"avgFitness":0.844050161850649,"bestGenome":"2 expandllm ‚Üíjina (3stg) k20","gapToPaid":-0.06981134321394333},{"generation":5,"bestFitness":0.8498113432139434,"avgFitness":0.8432113443777853,"bestGenome":"2 expandllm ‚Üíjina (3stg) k20","gapToPaid":-0.06981134321394333},{"generation":6,"bestFitness":0.8510969908223229,"avgFitness":0.8439971077548659,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":7,"bestFitness":0.8510969908223229,"avgFitness":0.8436848243521753,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":8,"bestFitness":0.8510969908223229,"avgFitness":0.8440039191461697,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":9,"bestFitness":0.8510969908223229,"avgFitness":0.8438202779714485,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":10,"bestFitness":0.8510969908223229,"avgFitness":0.8428345095858625,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":11,"bestFitness":0.8510969908223229,"avgFitness":0.8438066541581959,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":12,"bestFitness":0.8510969908223229,"avgFitness":0.8438655234023562,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":13,"bestFitness":0.8510969908223229,"avgFitness":0.843371864223616,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":14,"bestFitness":0.8510969908223229,"avgFitness":0.8431895210505769,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229},{"generation":15,"bestFitness":0.8510969908223229,"avgFitness":0.8438768997714903,"bestGenome":"1 lowercase ‚Üícascade (2stg) k10","gapToPaid":-0.0710969908223229}];
    const targetScore = 0.78;
    
    new Chart(document.getElementById('progressChart'), {
      type: 'line',
      data: {
        labels: history.map(h => `Gen ${h.generation}`),
        datasets: [
          {
            label: 'Best Local',
            data: history.map(h => h.bestFitness * 100),
            borderColor: '#58a6ff',
            backgroundColor: 'rgba(88, 166, 255, 0.1)',
            fill: true,
            tension: 0.3,
          },
          {
            label: 'Paid Baseline',
            data: history.map(() => targetScore * 100),
            borderColor: '#f85149',
            borderDash: [5, 5],
            fill: false,
          },
          {
            label: 'Population Avg',
            data: history.map(h => h.avgFitness * 100),
            borderColor: '#8b949e',
            fill: false,
            tension: 0.3,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { labels: { color: '#c9d1d9' } },
        },
        scales: {
          x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
          y: { 
            ticks: { color: '#8b949e', callback: v => v + '%' }, 
            grid: { color: '#30363d' },
            min: 50,
            max: 90,
          },
        },
      },
    });
  </script>
</body>
</html>