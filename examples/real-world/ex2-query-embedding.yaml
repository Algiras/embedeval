# Real-World Example 2: Query Embedding Analysis
# Analyzing query embedding quality with different strategies

test:
  name: "Real-World: Query Embedding Analysis"
  description: "Testing query embedding with Gemini and different strategies"

variants:
  - id: gemini-baseline
    name: "Gemini - Simple Retrieval"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: baseline

  - id: gemini-hybrid
    name: "Gemini - Hybrid (BM25 + Embeddings)"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: hybrid-bm25

  - id: gemini-chunked
    name: "Gemini - With Document Chunking"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: semantic-chunks

dataset: ./examples/sample-queries.jsonl
corpus: ./examples/sample-corpus.jsonl

metrics:
  - ndcg@5
  - ndcg@10
  - recall@5
  - recall@10
  - mrr@10

output:
  json: ./real-results/ex2-query-analysis/metrics.json
  dashboard: ./real-results/ex2-query-analysis/dashboard.html

# Run with: embedeval ab-test --config ./examples/real-world/ex2-query-embedding.yaml
