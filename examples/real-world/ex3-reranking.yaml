# Real-World Example 3: Reranking Strategies
# Comparing different reranking approaches

test:
  name: "Real-World: Reranking Comparison"
  description: "Testing reranking with MMR and diversity"

variants:
  - id: baseline-only
    name: "No Reranking (Baseline Only)"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: baseline

  - id: mmr-diversity
    name: "MMR Reranking (Diversity-focused)"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: mmr-diversity

  - id: hybrid-then-mmr
    name: "Hybrid BM25 + MMR"
    provider:
      type: google
      apiKey: ${GEMINI_API_KEY}
      model: text-embedding-004
    strategy: hybrid-bm25
    # Note: Could add second reranking stage in custom config

  - id: ollama-baseline
    name: "Ollama - Baseline (for comparison)"
    provider:
      type: ollama
      baseUrl: ${OLLAMA_HOST:-http://localhost:11434}
      model: nomic-embed-text
    strategy: baseline

dataset: ./examples/sample-queries.jsonl
corpus: ./examples/sample-corpus.jsonl

metrics:
  - ndcg@5
  - ndcg@10
  - recall@5
  - mrr@10

output:
  json: ./real-results/ex3-reranking/metrics.json
  dashboard: ./real-results/ex3-reranking/dashboard.html

# Run with: embedeval ab-test --config ./examples/real-world/ex3-reranking.yaml
